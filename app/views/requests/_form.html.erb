
<%= form_for(@request, html: { role: 'form', method: :post }) do |f| %>
  <% if @request.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@request.errors.count, "error") %> prohibited this request from being saved:</h2>

      <ul>
      <% @request.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>




<hr/>

<div class="row">


  <div class="form-group col-sm-6">
    <%= f.label :subject, 'Subject' %>
    <%= f.text_field :subject, placeholder: 'Subject', class: 'form-control', disabled: @disable_fields %>
  </div>

</div>

<div class="row">


  <div class="form-group col-sm-6">
    <%= f.label :description, 'Description' %>
    <%= f.text_area :description, placeholder: 'Description', class: 'form-control', disabled: @disable_fields %>
  </div>

</div>

<div class="row">
  

<div class="form-group col-sm-3">
<label>Issues</label>
<div class="panel panel-default ">

  <div class="panel-body">
    <% for issue in @issues %>
        <div>
          <%= check_box_tag "request[issue_ids][]", issue.id, @request.issues.include?(issue), disabled: @disable_fields  %>
          <%= issue.title %>
        </div>
    <% end %>
  </div>
</div>
</div>

</div>

<% if current_user.approver? || current_user.worker? || current_user.admin? %>
  <%= hidden_field(:request, :issue_ids) %>
  
  <div class="row">
    <div class="form-group col-sm-6">

      <%= f.label :status, 'Status' %>
      <br/>
      <%= f.select :status, options_for_select([["Select One", ""], "newrequest", "approved", "disapproved", "completed", "closed", "canceled"], :selected => @request.status), :class => 'form-control' %>
      
    </div>
  </div>
<% end %>



<div class="actions">
    <%= f.submit :class => 'btn btn-primary button right' %>
</div>

<% end %>

<hr/>


